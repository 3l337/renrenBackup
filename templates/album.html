{% extends "layout.html" %}

{% block content %}
<h2 class="ui dividing header">
    {{ album.name }}
    {% if album.desc %}
    <div class="sub header">{{ album.desc }}</div>
    {% endif %}
</h2>

<div class="ui cards photo-list">
    {% for p in photos %}
    <div id="photo-{{ p.id }}" class="card">
        <a class="image" href="{{ url_for('photo_detail_page', photo_id=p.id) }}">
            <!-- <img class="photo-snapshot" src="{{ p.src }}"> -->
            {{ p.src }}
        </a>
        <div class="content">
            {{ p.like }} 赞 / {{ p.share }} 分享 / {{ p.comment }} 评论 / {{ p.view }} 浏览
        </div>
    </div>
    {% endfor %}
</div>

<div class="list-pagination">
    <div class="ui divider"></div>
    <div class="ui pagination menu">
        {% if page > 1 %}
        <a class="item" href="{{ url_for('album_detail_page', page=1, album_id=album['id']) }}">
            <i class="angle double left icon"></i>
        </a>
        {% endif %}
        {% for p in range(1, total_page+1) %}
            {% if -3 < p - page < 3 %}
            <a class="item{% if p == page %} active{% endif %}" href="{{ url_for('album_detail_page', page=p, album_id=album['id']) }}">{{ p }}</a>
            {% endif %}
        {% endfor %}
        {% if page < total_page %}
        <a class="item" href="{{ url_for('album_detail_page', page=total_page, album_id=album['id']) }}">
            <i class="angle double right icon"></i>
        </a>
        {% endif %}
    </div>
</div>

<div class="album-extra">
    <div class="ui divider"></div>
    <div class="album-likes">
        {% for l in likes %}
            {% if index0 %},{% endif %}
            {{ l.uid }}
        {% endfor %}
        {% if album.like > 8 %}等{% endif %}
        {{ album.like }} 人点赞 / {{ album.share }} 分享 / {{ album.comment }} 评论
    </div>
    <div class="ui divider"></div>
    <div class="ui feed album-comments">
        {% for c in comments %}
        <div class="event">
            <div class="label">
                <a href="http://www.renren.com/profile.do?id={{ c.authorId }}" target="_blank">
                    <!-- <img src="{{ c.headPic }}" crossorigin="anonymous"> -->
                    <img src="{{ url_for('static', filename='men_tiny.gif') }}">
                </a>
            </div>
            <div class="content">
                <div class="summary">
                    <a href="http://www.renren.com/profile.do?id={{ c.authorId }}" target="_blank">{{ c.authorName }}</a>
                    <div class="date">
                        {{ c.t.strftime("%Y-%m-%d %H:%M") }}
                    </div>
                </div>
                <div class="extra text">
                    {{ c.content|safe }}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
