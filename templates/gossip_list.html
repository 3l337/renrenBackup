{% extends "layout.html" %}

{% block content %}
<div class="ui feed gossip-list">
    {% for gossip in gossip_list %}
    <div id="gossip-{{ gossip.id }}" class="event gossip-item{% if gossip.gift %} gossip-with-gift{% endif %}">
        <div class="label">
            <a href="http://www.renren.com/profile.do?id={{ gossip.guestId }}" target="_blank">
                <img src="{{ gossip.headPic }}">
            </a>
        </div>
        <div class="content">
            <div class="summary">
                <a href="http://www.renren.com/profile.do?id={{ gossip.guestId }}" target="_blank">{{ gossip.guestName }}</a>
                <div class="date">
                    {{ gossip.t.strftime("%Y-%m-%d %H:%M") }}
                {% if gossip.wap %}
                    <img class="mobile-tag" src="http://a.xnimg.cn/imgpro/icons/mobile.gif" title="手机发送">
                {% endif %}
                {% if gossip.whisper %}
                    <img class="whisper-tag" src="http://a.xnimg.cn/img/lock_red.gif"> 悄悄话
                {% endif %}
                </div>
            </div>
            <div class="extra text">
                {{ gossip.content|safe }}
                {% if gossip.attachPic %}
                <div class="gossip-attach">
                    <img src="{{ gossip.attachPic }}">
                </div>
                {% endif %}
                {% if gossip.gift %}
                <img class="gossip-gift" src="{{ gossip.gift }}">
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="list-pagination">
    <div class="ui divider"></div>
    <div class="ui pagination menu">
        {% if page > 1 %}
        <a class="item" href="{{ url_for('gossip_list_page', page=1) }}">
            <i class="angle double left icon"></i>
        </a>
        {% endif %}
        {% for p in range(1, total_page+1) %}
            {% if -3 < p - page < 3 %}
            <a class="item{% if p == page %} active{% endif %}" href="{{ url_for('gossip_list_page', page=p) }}">{{ p }}</a>
            {% endif %}
        {% endfor %}
        {% if page < total_page %}
        <a class="item" href="{{ url_for('gossip_list_page', page=total_page) }}">
            <i class="angle double right icon"></i>
        </a>
        {% endif %}
    </div>
</div>

{% endblock %}

